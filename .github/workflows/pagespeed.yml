name: PageSpeed Insights Automation

on:
  schedule:
    - cron: '0 0 * * *'
  workflow_dispatch:

jobs:
  run-pagespeed:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: run-pagespeed
        id: run-pagespeed
        uses: ./
        with:
          url: 'https://www.ibjapan.com/'
          key: ${{ secrets.GOOGLE_PSI }}

      - name: Output PageSpeed Metrics
        run: |
          echo "デスクトップのパフォーマンス: ${{ steps.run-pagespeed.outputs.desktop_score }}"
          echo "デスクトップのLCP: ${{ steps.run-pagespeed.outputs.desktop_lcp }}"
          echo "デスクトップのCLS: ${{ steps.run-pagespeed.outputs.desktop_cls }}"
          echo "デスクトップのFCP: ${{ steps.run-pagespeed.outputs.desktop_fcp }}"
          echo "デスクトップのTBT: ${{ steps.run-pagespeed.outputs.desktop_tbt }}"
          echo "デスクトップのSI: ${{ steps.run-pagespeed.outputs.desktop_speed }}"
          echo "モバイルのパフォーマンス: ${{ steps.run-pagespeed.outputs.mobile_score }}"
          echo "モバイルのLCP: ${{ steps.run-pagespeed.outputs.mobile_lcp }}"
          echo "モバイルのCLS: ${{ steps.run-pagespeed.outputs.mobile_cls }}"
          echo "モバイルのFCP: ${{ steps.run-pagespeed.outputs.mobile_fcp }}"
          echo "モバイルのTBT: ${{ steps.run-pagespeed.outputs.mobile_tbt }}"
          echo "モバイルのSI: ${{ steps.run-pagespeed.outputs.mobile_speed }}"
